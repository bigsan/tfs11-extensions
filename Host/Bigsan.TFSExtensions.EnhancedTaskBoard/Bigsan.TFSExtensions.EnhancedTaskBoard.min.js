TFS.module("Bigsan.TFSExtensions.EnhancedTaskBoard",["TFS.Host"],function(){function n(){var n='<style id="etb" type="text/css">.daysAgo { float: left; padding: 0 4px; color: white; background: darkgreen; }.daysAgo.recent { background: darkred; }.wiid { }<\/style>';$("head").append(n)}function t(){$(".tbTile, .taskboard-parent[id]").each(function(n,t){var i=$(t),r,u;$(t).is(".taskboard-parent")&&(r=$(t).closest(".taskboard-row").next(),i=i.add(r)),i.find(".witTitle .wiid").length==0&&i.find(".witTitle").prepend("<strong class='wiid' /> - "),u=t.id.match(/\d+$/)[0],i.find(".witTitle .wiid").text(u)})}function i(){return $(".tbTile, .taskboard-parent[id]").map(function(n,t){return t.id.match(/\d+$/)[0]}).get()}function r(n){var t=location.pathname.match(/\/tfs\/[^\/]+/i)[0],i=$.map(n,function(n){return"ids="+n}).join("&");return t+"/_api/_wit/workitems?__v=1&"+i}function u(n,t){var i=r(n);$.getJSON(i,function(n){t(n.__wrappedArray)})}n(),t();var f=i();u(f,function(n){var t=new Date;$.each(n,function(n,i){var e=parseInt(i.fields["3"].match(/\d+/)[0],10),o=i.fields["-3"],r=new Date(e),s=t.getTime()-r.getTime(),u=Math.ceil(s/864e5),f=$("<div class='daysAgo'>"+u+"d<\/div>").attr("title",r.toString());u<2&&f.addClass("recent"),$("#tile-"+o).find(".witExtra").prepend(f)})})})